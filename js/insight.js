!function(t,e){function i(e){return t("<section>").addClass("ins-section").append(t("<header>").addClass("ins-section-header").text(e))}function n(i,n,o,s,a){return t("<div>").addClass("ins-selectable").addClass("ins-search-item").append(t("<header>").append(t("<i>").addClass("fa").addClass("fa-"+i)).append(null!=n&&""!=n?n:e.TRANSLATION.UNTITLED).append(o?t("<span>").addClass("ins-slug").text(o):null)).append(s?t("<p>").addClass("ins-search-preview").text(s):null).attr("data-url",a)}function o(t,o){var s,a;if(0===o.length)return null;switch(s=e.TRANSLATION[t],t){case"POSTS":case"PAGES":a=o.map(function(t){return n("file",t.title,null,t.text.slice(0,150),e.ROOT_URL+t.path)});break;case"CATEGORIES":case"TAGS":a=o.map(function(e){return n("CATEGORIES"===t?"folder":"tag",e.name,e.slug,null,e.permalink)});break;default:return null}return i(s).append(a)}function s(t,e){var i={},n=t.pages.concat(t.posts);n.forEach(function(t){t[e]&&t[e].forEach(function(t){i[t.name]=t})});var o=[];for(var e in i)o.push(i[e]);return o}function a(t){return t.split(" ").filter(function(t){return!!t}).map(function(t){return t.toUpperCase()})}function r(t,e,i){var n=a(t),o=n.filter(function(t){var n=i.filter(function(i){return e.hasOwnProperty(i)?e[i].toUpperCase().indexOf(t)>-1?!0:void 0:!1});return n.length>0?!0:!1});return o.length===n.length}function l(t){return{POST:function(e){return r(t,e,["title","text"])},PAGE:function(e){return r(t,e,["title","text"])},CATEGORY:function(e){return r(t,e,["name","slug"])},TAG:function(e){return r(t,e,["name","slug"])}}}function c(t,e,i,n){var o=0;return a(t).forEach(function(t){var s=new RegExp(t,"img");i.forEach(function(t,i){if(e.hasOwnProperty(t)){var a=e[t].match(s);o+=a?a.length*n[i]:0}})}),o}function d(t){return{POST:function(e){return c(t,e,["title","text"],[3,1])},PAGE:function(e){return c(t,e,["title","text"],[3,1])},CATEGORY:function(e){return c(t,e,["name","slug"],[1,1])},TAG:function(e){return c(t,e,["name","slug"],[1,1])}}}function h(t,e){var i=d(e),n=l(e),o=t.posts,a=t.pages,r=s(t,"tags"),c=s(t,"categories");return{posts:o.filter(n.POST).sort(function(t,e){return i.POST(e)-i.POST(t)}).slice(0,5),pages:a.filter(n.PAGE).sort(function(t,e){return i.PAGE(e)-i.PAGE(t)}).slice(0,5),categories:c.filter(n.CATEGORY).sort(function(t,e){return i.CATEGORY(e)-i.CATEGORY(t)}).slice(0,5),tags:r.filter(n.TAG).sort(function(t,e){return i.TAG(e)-i.TAG(t)}).slice(0,5)}}function p(t){b.empty();for(var e in t)b.append(o(e.toUpperCase(),t[e]))}function f(t){if(0!==t.length){var e=y[0].clientHeight,i=t.position().top-y.scrollTop(),n=t[0].clientHeight+t.position().top;n>e+y.scrollTop()&&y.scrollTop(n-y[0].clientHeight),0>i&&y.scrollTop(t.position().top)}}function u(e){var i=t.makeArray(b.find(".ins-selectable")),n=-1;i.forEach(function(e,i){return t(e).hasClass("active")?(n=i,void 0):void 0});var o=(i.length+n+e)%i.length;t(i[n]).removeClass("active"),t(i[o]).addClass("active"),f(t(i[o]))}function g(t){t&&t.length&&(location.href=t.attr("data-url"))}var m=t(".ins-search"),v=m.find(".ins-search-input"),y=m.find(".ins-section-wrapper"),b=m.find(".ins-section-container");m.parent().remove(".ins-search"),t("body").append(m),t.getJSON(e.CONTENT_URL,function(e){"#ins-search"===location.hash.trim()&&m.addClass("show"),v.on("input",function(){var i=t(this).val();p(h(e,i))}),v.trigger("input")}),t(document).on("click focus",".search-field",function(){m.addClass("show"),m.find(".ins-search-input").focus()}).on("click focus",".search-form-submit",function(){m.addClass("show"),m.find(".ins-search-input").focus()}).on("click",".ins-search-item",function(){g(t(this))}).on("click",".ins-close",function(){m.removeClass("show")}).on("keydown",function(t){if(m.hasClass("show"))switch(t.keyCode){case 27:m.removeClass("show");break;case 38:u(-1);break;case 40:u(1);break;case 13:g(b.find(".ins-selectable.active").eq(0))}})}(jQuery,window.INSIGHT_CONFIG);